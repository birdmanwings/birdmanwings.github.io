<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="基于软路由打造的新一版家庭网络拓扑图  需求分析接上文《个人家庭影音系统》，在测试运行一段时间后遇上一些问题：  wrt32x 路由器刷自编译的 openwrt 不够稳定，有时候需要重启路由器才能连接网络。 直接路由器裸接硬盘盒的管理方式稍显粗糙。 最重要的是路由器的天线给猫撞断了。  本来笔者考虑的是否买一个路由器重新刷 openwrt，例如红米 AX6000。但是考虑到后续家庭的网络拓展以及">
<meta property="og:type" content="article">
<meta property="og:title" content="个人家庭影音系统2.0">
<meta property="og:url" content="http://example.com/home-video-system-v2/index.html">
<meta property="og:site_name" content="BDWMS">
<meta property="og:description" content="基于软路由打造的新一版家庭网络拓扑图  需求分析接上文《个人家庭影音系统》，在测试运行一段时间后遇上一些问题：  wrt32x 路由器刷自编译的 openwrt 不够稳定，有时候需要重启路由器才能连接网络。 直接路由器裸接硬盘盒的管理方式稍显粗糙。 最重要的是路由器的天线给猫撞断了。  本来笔者考虑的是否买一个路由器重新刷 openwrt，例如红米 AX6000。但是考虑到后续家庭的网络拓展以及">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://image.bdwms.com/EEE690B2-CC22-4AD2-AD7F-323B6802EE90.jpeg">
<meta property="og:image" content="https://image.bdwms.com/59BC446E-506F-404D-A924-037ED607E718_1_102_o.jpeg">
<meta property="og:image" content="https://image.bdwms.com/7A2038F3-AE4B-4DC9-B105-ED8305620AAD_1_105_c.jpeg">
<meta property="og:image" content="https://image.bdwms.com/IMG_0020.jpeg">
<meta property="og:image" content="https://image.bdwms.com/physics_network.png">
<meta property="og:image" content="https://image.bdwms.com/image-20230706002040310.png">
<meta property="og:image" content="https://image.bdwms.com/image-20230706002527757.png">
<meta property="og:image" content="https://image.bdwms.com/%E6%88%AA%E5%B1%8F2023-07-06%2000.32.07.png">
<meta property="og:image" content="https://image.bdwms.com/image-20230706221651903.png">
<meta property="og:image" content="https://image.bdwms.com/image-20230706223504020.png">
<meta property="og:image" content="https://image.bdwms.com/image-20230706231009589.png">
<meta property="og:image" content="https://image.bdwms.com/%E6%88%AA%E5%B1%8F2023-07-06%2023.12.32.png">
<meta property="og:image" content="https://image.bdwms.com/physics_network_2.png">
<meta property="article:published_time" content="2023-06-19T15:19:38.000Z">
<meta property="article:modified_time" content="2023-07-10T17:34:15.728Z">
<meta property="article:author" content="bdwms">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://image.bdwms.com/EEE690B2-CC22-4AD2-AD7F-323B6802EE90.jpeg">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>个人家庭影音系统2.0</title>
    <!-- async scripts -->
    <!-- Google Analytics -->

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-188330730-1"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-188330730-1');
  </script>


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 5.4.2"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/aop-security-magic/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/a-novice-s-exploration-of-large-language-models/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/home-video-system-v2/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/home-video-system-v2/&text=个人家庭影音系统2.0"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/home-video-system-v2/&title=个人家庭影音系统2.0"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/home-video-system-v2/&is_video=false&description=个人家庭影音系统2.0"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=个人家庭影音系统2.0&body=Check out this article: http://example.com/home-video-system-v2/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/home-video-system-v2/&title=个人家庭影音系统2.0"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/home-video-system-v2/&title=个人家庭影音系统2.0"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/home-video-system-v2/&title=个人家庭影音系统2.0"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/home-video-system-v2/&title=个人家庭影音系统2.0"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/home-video-system-v2/&name=个人家庭影音系统2.0&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/home-video-system-v2/&t=个人家庭影音系统2.0"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">1.</span> <span class="toc-text">需求分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E4%BB%B6%E5%87%86%E5%A4%87"><span class="toc-number">2.</span> <span class="toc-text">硬件准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85"><span class="toc-number">3.</span> <span class="toc-text">软件安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B"><span class="toc-number">3.1.</span> <span class="toc-text">技术选型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85"><span class="toc-number">3.2.</span> <span class="toc-text">系统安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E6%8B%93%E5%B1%95"><span class="toc-number">3.3.</span> <span class="toc-text">服务拓展</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E5%9B%9E%E9%A1%BE"><span class="toc-number">4.</span> <span class="toc-text">总结回顾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">5.</span> <span class="toc-text">参考资料</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        个人家庭影音系统2.0
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">bdwms</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-06-19T15:19:38.000Z" class="dt-published" itemprop="datePublished">2023-06-19</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/%E6%9D%82/">杂</a>
    </div>


      

    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <blockquote>
<p>基于软路由打造的新一版家庭网络拓扑图</p>
</blockquote>
<h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><p>接上文《<a target="_blank" rel="noopener" href="https://bdwms.site/home-video-system/">个人家庭影音系统</a>》，在测试运行一段时间后遇上一些问题：</p>
<ol>
<li>wrt32x 路由器刷自编译的 openwrt 不够稳定，有时候需要重启路由器才能连接网络。</li>
<li>直接路由器裸接硬盘盒的管理方式稍显粗糙。</li>
<li>最重要的是路由器的天线给猫撞断了。</li>
</ol>
<p>本来笔者考虑的是否买一个路由器重新刷 openwrt，例如红米 AX6000。但是考虑到后续家庭的网络拓展以及自己动手的乐趣，最终决定上手软路由，基于软路由来打造整个家庭的网络拓扑。</p>
<h2 id="硬件准备"><a href="#硬件准备" class="headerlink" title="硬件准备"></a>硬件准备</h2><p>通过在恩山论坛，v2ex，知乎等平台研究了几天，大致理清了整个软路由硬件的体系。购买软路由最为主要的就是挑选 CPU 型号，其中 CPU 又分为 x86 和 arm 架构，x86 架构的软路由更加通用并且可拓展性可玩性更好，arm 架构的 CPU 会更便宜，笔者根据自身需求选择 x86 架构的 CPU。目前市面上主流的 x86 软路由 CPU 型号为 J4125，N5105，以及比较新的 N100 等。对于笔者，由于选择的电信宽带暂时还是 300M 的，并且也并不准备在软路由上运行 Windows 虚拟机等过于复杂的操作，所以选择了 J4125 作为入门软路由的第一站。</p>
<img src="https://image.bdwms.com/EEE690B2-CC22-4AD2-AD7F-323B6802EE90.jpeg" alt="EEE690B2-CC22-4AD2-AD7F-323B6802EE90" style="zoom: 25%;" />

<p>倍控这款 J4125 最主要的是有 4 个 2.5G 的网口，并配有 2 个 3.0 的 USB 口，这也是后面最为主要使用的。裸的 J4125 软路由需要自己搭配内存条以及固态硬盘，目前的内存和固态硬盘都十分便宜，这里在京东上选择了内存条为光威 3200 DDR4 8G * 2，其实这款最高内存频率只支持到 2666MHz，但是由于 J4125 比较吃内存颗粒，不是每个内存条都能点亮所以，最后 3200 点亮后不想再麻烦更换了。</p>
<img src="https://image.bdwms.com/59BC446E-506F-404D-A924-037ED607E718_1_102_o.jpeg" alt="59BC446E-506F-404D-A924-037ED607E718_1_102_o" style="zoom: 33%;" />

<p>固态硬盘的话，这款支持 mSATA 和 2.5 寸的 SATA 固态同时安装，这里随便购买了金百达的 mSATA 240GB 固态作为软路由的系统盘，因为无论是目前临时使用硬盘盒还是之后添加 NAS，笔者都认为路由处理，数据存储等各种服务最好还是隔离，毕竟 ALL IN ONE 等于 ALL IN BOOM。</p>
<img src="https://image.bdwms.com/7A2038F3-AE4B-4DC9-B105-ED8305620AAD_1_105_c.jpeg" alt="7A2038F3-AE4B-4DC9-B105-ED8305620AAD_1_105_c" style="zoom: 67%;" />

<p>拆机将内存和硬盘安装上，效果图大致如下：</p>
<img src="https://image.bdwms.com/IMG_0020.jpeg" alt="IMG_0020" style="zoom: 25%;" />

<p>然后软路由如果想要支持 WiFi 连接需要一个信号发射器，那么之前使用的路由器用来当作 AP 再好不过了，笔者使用的是经典的红米 AC2100。整体的大致物理网络连接图如下：</p>
<p><img src="https://image.bdwms.com/physics_network.png" alt="physics_network"></p>
<h2 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h2><h3 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h3><p>对于软路由的有多种技术选型，例如简单的有直接物理机安装 OpenWrt，iKuai 等软路由操作系统、物理机安装 ikuai 虚拟机安装 OpenWrt、物理机安装虚拟机，虚拟机中运行操作系统等等部署方式。经过简单的调研这边考虑到可玩性、稳定性、可移植等因素，最终选择了虚拟机安装操作系统，其中常见的虚拟机 ESXi、PVE、unRaid：</p>
<ul>
<li>ESXi：是VMWare vSphere Hypervisor套件之下重要组件。前身是ESX，依赖Linux源码，后来抛弃Linux源码做成了ESXi。整个产品商用气息浓重，界面清晰易用，但硬件兼容性较差（主要面向服务器），没什么扩展性（毕竟不是linux）。</li>
<li>PVE：全称Proxmox Virtual Environment，是基于Debian的Linux系统，虚拟机内核为KVM。硬件兼容性优秀。界面功能不强，很多操作要靠命令行，但扩展能力几乎是无限的。</li>
<li>unRaid：其实是个NAS系统，是基于Slackware的Linux系统，虚拟机内核也是KVM。磁盘阵列管理非常有特色，灵活性很高。同时还有很不错的插件、Docker和虚拟机支持。</li>
</ul>
<p>具体的对比可参考这篇文章：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/166352130">ESXi、PVE、unRaid对比</a>，笔者身为程序员肯定是选择可拓展性，可玩性更好的 PVE。</p>
<h3 id="系统安装"><a href="#系统安装" class="headerlink" title="系统安装"></a>系统安装</h3><p>之后就是 PVE 以及软路由系统的安装配置，具体参考这篇文章不再赘述：<a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-8159418-1-1.html">保姆级J4125下安装pve&#x2F;爱快&#x2F;op</a> 或者教程视频参考：<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=LqZFKAJxcAQ">YouTube 视频</a></p>
<p>安装之后整个的网络配置，子网网段：192.168.31.xxx&#x2F;256</p>
<ul>
<li>PVE 虚拟机：192.168.31.2:8006</li>
<li>ikuai 主路由：192.168.31.3</li>
<li>OpenWrt 旁路由：192.168.31.5</li>
</ul>
<p>其中 ikuai 通过 DHCP 自动从天翼网关获取 IP，这里其实也可以用宽带账号 + 密码 PPPoE 拨号上网，这里暂时不想折腾要密码。</p>
<img src="https://image.bdwms.com/image-20230706002040310.png" alt="image-20230706002040310" style="zoom: 50%;" />

<p>安装好的 OpenWrt 设置 Lan 口，将网关指向 ikuai 主路由：</p>
<img src="https://image.bdwms.com/image-20230706002527757.png" alt="image-20230706002527757" style="zoom:50%;" />

<p>ikuai 主路由负责家庭的正常上网，OpenWrt 负责科学上网等各种特殊操作折腾而不会影响到主路由的正常使用，那么设备想要科学上网如何选择究竟走哪个网关，有一种解法是主路由和旁路由网关互指，就不需要改设置网关，但是这个操作很不优雅，并且旁路由问题可能会影响到主路由，这是不想要的。所以目前暂时还是通过设备手动指定网关，或者在 ikuai 的 DHCP 静态分配中指定网关。例如笔者的 Windows 系统是网线连接路由器，静态绑定 IP 后可以通过内网 WiFi 远程唤醒 WakeOnLan，这里就可以指定 Windows 网关到 OpenWrt 的地址 192.168.31.5。Windows 就会走 OpenWrt 的科学代理，再通过 ikuai 主路由连接到互联网了。</p>
<p><img src="https://image.bdwms.com/%E6%88%AA%E5%B1%8F2023-07-06%2000.32.07.png" alt="截屏2023-07-06 00.32.07"></p>
<p>至此整个家里的各种设备就应该可以正常联网了。</p>
<h3 id="服务拓展"><a href="#服务拓展" class="headerlink" title="服务拓展"></a>服务拓展</h3><p>接下来就是各种服务例如 Jellyfin 应该如何运行呢，同样有各种技术选型，对于笔者来说各种服务肯定优先运行在 docker 中，那么问题就是 docker 在 PVE 中如何安装呢，通过搜索资料大致集中方式如下：</p>
<ol>
<li>直接安装在 PVE 上</li>
<li>安装在 ikuai，OpenWrt 等路由系统的 Docker 中</li>
<li>安装在 lxc 上，模版选择 Ubuntu，Debian 等系统模版</li>
<li>安装在虚拟机上，用 Ubuntu，Debian 等系统镜像</li>
</ol>
<p>每个方案来大致讲解下：</p>
<p>对于方案一，直接安装在 PVE 虚拟机底座系统上就污染基础环境，十分不推荐。<br>对于方案二，将服务安装在路由系统上十分不优雅，路由系统故障可能导致其他服务不可用，所以也会有单点故障的问题，不可选。<br>对于方案三，LXC 的大致原理是利用 namespace, cgroup 等技术，轻量级的虚拟化技术。<br>对于方案四，虚拟机中安装更加隔离，安全性更好，但是消耗的资源相对较多一些，同样复杂一些，这是 PVE 官方推荐安装 docker 的方式。</p>
<p>综合考虑方案三，四都是可以的，安全性和资源消耗都暂时不是考虑的重点，所以这里笔者选择了教程比较多的使用 LXC 安装 docker 并部署 Jellyfin 的方式，具体步骤参考这个视频：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Xx4y1G7MG/?spm_id_from=333.337.search-card.all.click&vd_source=024a9b691c992bd76b42706bc7b30e9e">免费开源影音服务Jellyfin部署，PVE下LXC套娃安装Debian Docker，核显硬解转码以N5105为例低功耗intel CPU核显通用</a></p>
<p>Jellyfin 服务跑在 Ubuntu22 的 LXC 容器安装的 docker 中，使用 portainer 来管理 Docker 并安装 N 大的中国定制版 Jellyfin。但是在实际使用的时候，因为 J4125 与 N5105 不同，所以有些步骤弄了半天没有开启例如低电压模式，暂时放弃测试局域网硬解效果还可以就不再折腾，毕竟音视频驱动不是笔者擅长的。</p>
<p>这里可以简单看下硬解的作用，主要是为了客户端无法支持的编码，或者外网带宽不够需要调整清晰度在服务端解码，如果此时使用软解那么整个软路由的 CPU 就会 100% 被挤爆，路由等其他服务也会受到影响，这也是为什么需要将 J4125 的集成显卡 600 分配直通给 LXC 容器，并透传给 docker 容器中。</p>
<p><img src="https://image.bdwms.com/image-20230706221651903.png" alt="image-20230706221651903"></p>
<p>最终部署好 Ubuntu lxc 容器在 192.168.31.41:9443 端口</p>
<p><img src="https://image.bdwms.com/image-20230706223504020.png" alt="image-20230706223504020"></p>
<p>并运行 Jellyfin 服务在 192.168.31.41:8096 上，通过 Chrome 浏览器播放 4k 的《星际穿越》，然后在 Ubuntu 中运行 intel_gpu_top 命令来观察显卡的运行情况，可以看到硬解已经成功开启。<img src="https://image.bdwms.com/image-20230706231009589.png" alt="image-20230706231009589"></p>
<p>然后可以看到网页上实时播放信息，视频的转码帧率 36 fps 还可以接受，到此为止显卡硬解直通 Jellyfin 的链路成功。</p>
<p><img src="https://image.bdwms.com/%E6%88%AA%E5%B1%8F2023-07-06%2023.12.32.png" alt="截屏2023-07-06 23.12.32"></p>
<p>然后如果可以的话，其实局域网内直接客户端解码最好，例如 iOS 选择 infuse 作为客户端。</p>
<h2 id="总结回顾"><a href="#总结回顾" class="headerlink" title="总结回顾"></a>总结回顾</h2><p>最后可以看到我的整个家庭网络架构图如下：</p>
<p><img src="https://image.bdwms.com/physics_network_2.png" alt="physics_network_2"></p>
<p>整个网络拓扑图中基本已经能满足日常运行，更多可以改进的例如添加 NAS，交换机等再后续改造中进行升级。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-8159418-1-1.html">保姆级J4125下安装pve&#x2F;爱快&#x2F;op</a></li>
<li><a target="_blank" rel="noopener" href="https://www.v2ex.com/t/830945">v2ex pve 7 安装 docker 的最佳方式讨论</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/166352130">ESXi、PVE、unRaid对比</a></li>
<li><a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-6754687-1-1.html">(2023.4.14)SHELL脚本：一键给PVE增加温度和cpu频率显示，NVME，机械固态硬盘信息 </a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Xx4y1G7MG/?spm_id_from=333.337.search-card.all.click&vd_source=024a9b691c992bd76b42706bc7b30e9e">免费开源影音服务Jellyfin部署，PVE下LXC套娃安装Debian Docker，核显硬解转码以N5105为例低功耗intel CPU核显通用</a></li>
<li><a target="_blank" rel="noopener" href="https://www.chiphell.com/forum.php?mod=viewthread&tid=2375777&extra=&authorid=338165&page=1">[230414]Jellyfin中国特供版+Docker镜像，含驱动，免折腾开箱即用</a></li>
<li><a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-8157780-1-1.html">给孔昊天同学的lxc下安装docker做个延伸：装jellyfin共享集显并挂载NAS</a></li>
<li><a target="_blank" rel="noopener" href="https://www.itxiaoniao.net/archives/378/">USB硬盘挂载到PVE LXC容器使用&#x2F; Proxmox VE硬盘直通黑群晖</a></li>
</ul>

  </div>
</article>


    <div class="blog-post-comments">
        <div id="utterances_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a href="/categories/">Category</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">1.</span> <span class="toc-text">需求分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E4%BB%B6%E5%87%86%E5%A4%87"><span class="toc-number">2.</span> <span class="toc-text">硬件准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85"><span class="toc-number">3.</span> <span class="toc-text">软件安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B"><span class="toc-number">3.1.</span> <span class="toc-text">技术选型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85"><span class="toc-number">3.2.</span> <span class="toc-text">系统安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E6%8B%93%E5%B1%95"><span class="toc-number">3.3.</span> <span class="toc-text">服务拓展</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E5%9B%9E%E9%A1%BE"><span class="toc-number">4.</span> <span class="toc-text">总结回顾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">5.</span> <span class="toc-text">参考资料</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/home-video-system-v2/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/home-video-system-v2/&text=个人家庭影音系统2.0"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/home-video-system-v2/&title=个人家庭影音系统2.0"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/home-video-system-v2/&is_video=false&description=个人家庭影音系统2.0"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=个人家庭影音系统2.0&body=Check out this article: http://example.com/home-video-system-v2/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/home-video-system-v2/&title=个人家庭影音系统2.0"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/home-video-system-v2/&title=个人家庭影音系统2.0"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/home-video-system-v2/&title=个人家庭影音系统2.0"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/home-video-system-v2/&title=个人家庭影音系统2.0"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/home-video-system-v2/&name=个人家庭影音系统2.0&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/home-video-system-v2/&t=个人家庭影音系统2.0"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2018-2023
    <a target="_blank" rel="noopener" href="https://bdwms.site">bdwms<a>
  </div>
  <div class="footer-right">
    <nav>
      <ul>
          <li><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">皖ICP备18025933号-3</a></li>
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->


 
  <link
    rel="preload"
    href="/lib/font-awesome/css/all.min.css"
    as="style"
    onload="this.onload=null;this.rel='stylesheet'"
  />
  <noscript
    ><link
      rel="stylesheet"
      href="/lib/font-awesome/css/all.min.css"
  /></noscript>


    <!-- jquery -->

  
<script src="/lib/jquery/jquery.min.js"></script>





<!-- clipboard -->

  
    
<script src="/lib/clipboard/clipboard.min.js"></script>

  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

    <script type="text/javascript">
      var utterances_repo = 'birdmanwings/birdmanwings.github.io';
      var utterances_issue_term = 'pathname';
      var utterances_label = 'Comment';
      var utterances_theme = 'github-dark';

      (function(){
          var script = document.createElement('script');

          script.src = 'https://utteranc.es/client.js';
          script.setAttribute('repo', utterances_repo);
          script.setAttribute('issue-term', 'pathname');
          script.setAttribute('label', utterances_label);
          script.setAttribute('theme', utterances_theme);
          script.setAttribute('crossorigin', 'anonymous');
          script.async = true;
          (document.getElementById('utterances_thread')).appendChild(script);
      }());
  </script>

</body>
</html>
